apiVersion: mosn.io/v1
kind: HTTPFilterPolicy
metadata:
  name: policy
spec:
  targetRef:
    group: gateway.networking.k8s.io
    kind: HTTPRoute
    name: default
  filters:
    preLua:
      config:
        sourceCode:
          inlineString: |
            function envoy_on_request(handle)
              local headers = handle:headers()
              headers:add("doraemon", "Good morning!")
            end
    demo:
      config:
        hostName: doraemon
    postLua:
      config:
        sourceCode:
          inlineString: |
            function envoy_on_request(handle)
              local headers = handle:headers()
              headers:add("doraemon", "world.")
            end
